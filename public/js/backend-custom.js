var Backend={};Backend={Utils:{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),toggleClass:function(e,t){if(e.classList)e.classList.toggle(t);else{var s=e.className.split(" "),n=s.indexOf(t);n>=0?s.splice(n,1):s.push(t),e.className=s.join(" ")}},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},documentReady:function(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)},ajaxrequest:function(e,t,s,n,o){var r=new XMLHttpRequest,l=jQuery(".loading");(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open(t,e,!0),r.onloadstart=function(){l.show()},r.onloadend=function(){l.hide()},r.setRequestHeader("X-CSRF-TOKEN",n),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"post"!==t.toLowerCase()&&"patch"!==t.toLowerCase()||(r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s=this.jsontoformdata(s)),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(r.onload=o.success(r))},r.onerror=o.error,r.send(s)},jsontoformdata:function(e){if("object"!=typeof e&&"undefined"!=typeof console)return null;u=encodeURIComponent;for(var t="",s=Object.keys(e),n=0;n<s.length;n++)t+=u(s[n])+"="+u(e[s[n]]),n<s.length-1&&(t+="&");return t}},Pages:{init:function(e){}},Roles:{selectors:{associated:document.querySelector("select[name='associated_permissions']"),associated_container:document.getElementById("#available-permissions")},init:function(e){this.setSelectors(),this.setRolepermission(e),this.addHandlers()},setSelectors:function(){this.selectors.associated=document.querySelector("select[name='associated_permissions']"),this.selectors.associated_container=document.getElementById("available-permissions")},addHandlers:function(){var e=this.selectors.associated,t=this.selectors.associated_container;null!=t&&("custom"==e.value?Backend.Utils.removeClass(t,"hidden"):Backend.Utils.addClass(t,"hidden")),e.onchange=function(s){null!=t&&("custom"==e.value?Backend.Utils.removeClass(t,"hidden"):Backend.Utils.addClass(t,"hidden"))}},setRolepermission:function(e){Backend.Users.setSelectors(),Backend.Users.addHandlers(e)}},Users:{selectors:{select2:jQuery(".select2"),getPremissionURL:"",showPermission:document.querySelectorAll(".show-permissions")},init:function(e){this.setSelectors(),this.addHandlers(e)},setSelectors:function(){this.selectors.select2=jQuery(".select2"),this.selectors.getRoleForPermissions=document.querySelectorAll(".get-role-for-permissions"),this.selectors.getAvailabelPermissions=document.querySelector(".get-available-permissions"),this.selectors.Role3=document.getElementById("role-3"),this.showPermission=document.querySelectorAll(".show-permissions")},addHandlers:function(e){this.selectors.getRoleForPermissions.forEach(function(e){e.onclick=function(e){callback={success:function(e){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText),s=t.permissions,n=t.rolePermissions,o=t.allPermissions;if(Backend.Users.selectors.getAvailabelPermissions.innerHTML="",htmlstring="",0==s.length)Backend.Users.selectors.getAvailabelPermissions.innerHTML="<p>There are no available permissions.</p>";else for(var r in s){var l="";1==o&&0==n.length?l='checked="checked"':void 0!==n[r]&&(l='checked="checked"'),htmlstring+='<label class="control control--checkbox"> <input type="checkbox" name="permissions['+r+']" value="'+r+'" id="perm_'+r+'" '+l+' /> <label for="perm_'+r+'">'+s[r]+'</label> <div class="control__indicator"></div> </label> <br>'}Backend.Users.selectors.getAvailabelPermissions.innerHTML=htmlstring,Backend.Utils.removeClass(document.getElementById("available-permissions"),"hidden")}else Backend.Users.selectors.getAvailabelPermissions.innerHTML="<p>There are no available permissions.</p>"},error:function(){Backend.Users.selectors.getAvailabelPermissions.innerHTML="<p>There are no available permissions.</p>"}},Backend.Utils.ajaxrequest(Backend.Users.selectors.getPremissionURL,"post",{role_id:e.target.value},Backend.Utils.csrf,callback)}}),"create"==e&&Backend.Users.selectors.Role3.click(),this.selectors.select2.select2()},windowloadhandler:function(){Backend.Users.selectors.showPermission.forEach(function(e){e.onclick=function(e){e.preventDefault();var t=this.getAttribute("data-role"),s=document.querySelector(".permission-list[data-role='"+t+"']"),n=this.querySelector(".hide-text"),o=this.querySelector(".show-text");Backend.Utils.toggleClass(s,"hidden"),Backend.Utils.toggleClass(n,"hidden"),Backend.Utils.toggleClass(o,"hidden")}})}},UserDeleted:{selectors:{AlldeletePerms:document.querySelectorAll("a[name='delete_user_perm']"),AllrestorePerms:document.querySelectorAll("a[name='restore_user']"),Areyousure:"",delete_user_confirm:"",continue:"",cancel:"",restore_user_confirm:""},setSelectors:function(){this.selectors.AlldeletePerms=document.querySelectorAll("a[name='delete_user_perm']"),this.selectors.AllrestorePerms=document.querySelectorAll("a[name='restore_user']")},windowloadhandler:function(){this.setSelectors(),this.selectors.AlldeletePerms.forEach(function(e){e.onclick=function(e){e.preventDefault();var t=this.getAttribute("href");swal({title:Backend.UserDeleted.selectors.Areyousure,text:Backend.UserDeleted.selectors.delete_user_confirm,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:Backend.UserDeleted.selectors.continue,cancelButtonText:Backend.UserDeleted.selectors.cancel,closeOnConfirm:!1},function(e){e&&(window.location.href=t)})}}),this.selectors.AllrestorePerms.forEach(function(e){e.onclick=function(e,t){e.preventDefault();var s=this.getAttribute("href");swal({title:Backend.UserDeleted.selectors.Areyousure,text:Backend.UserDeleted.selectors.restore_user_confirm,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:Backend.UserDeleted.selectors.continue,cancelButtonText:Backend.UserDeleted.selectors.cancel,closeOnConfirm:!1},function(e){e&&(window.location.href=s)})}})}},Blog:{selectors:{tags:jQuery(".tags"),categories:jQuery(".categories"),toDisplay:jQuery(".toDisplay"),status:jQuery(".status"),GenerateSlugUrl:"",name:document.getElementById("name"),SlugUrl:"",slug:document.getElementById("slug")},init:function(e){this.addHandlers()},addHandlers:function(){this.selectors.tags.select2({tags:!0}),this.selectors.categories.select2(),this.selectors.toDisplay.select2(),this.selectors.status.select2(),this.selectors.name.onblur=function(e){url=e.target.value,""!==url&&(callback={success:function(e){e.status>=200&&e.status<400&&(response=e.responseText,Backend.Blog.selectors.slug.value=Backend.Blog.selectors.SlugUrl+"/"+response.trim())},error:function(e){}},Backend.Utils.ajaxrequest(Backend.Blog.selectors.GenerateSlugUrl,"post",{text:url},Backend.Utils.csrf,callback))}}},Menu:{selectors:{menuItemContainer:jQuery("#menu-items"),menuItemsData:jQuery(".menu-items-field"),addCustomUrlButton:jQuery(".show-modal"),modal:jQuery("#showMenuModal"),document:jQuery("document"),addCustomUrlForm:"#menu-add-custom-url",addModuleToMenuButton:".add-module-to-menu",removeMenuItemButton:".remove-menu-item",editMenuItemButton:".edit-menu-item",formUrl:""},methods:{getNewId:function(e){var t=e.match(/"id":[0-9]+/gi);return t?($.each(t,function(e,s){t[e]=parseInt(s.replace('"id":',""))}),Math.max.apply(Math,t)+1):1},findItemById:function(e,t){if(e.id==t)return e;var s,n=!1;return e.children&&$.each(e.children,function(e,o){if(s=Backend.Menu.methods.findItemById(o,t))return n=!0,!1}),n?s:null},addMenuItem:function(e){Backend.Menu.selectors.menuItemContainer.nestable("add",{id:Backend.Menu.methods.getNewId(Backend.Menu.selectors.menuItemsData.val()),content:e.name,name:e.name,url:e.url,url_type:e.url_type,open_in_new_tab:e.open_in_new_tab,icon:e.icon,view_permission_id:e.view_permission_id}),Backend.Menu.selectors.menuItemsData.val(JSON.stringify(Backend.Menu.selectors.menuItemContainer.nestable("serialise")))},editMenuItem:function(e){var t,s={id:e.id,content:e.name,name:e.name,url:e.url,url_type:e.url_type,open_in_new_tab:e.open_in_new_tab,icon:e.icon,view_permission_id:e.view_permission_id},n=Backend.Menu.selectors.menuItemContainer.nestable("serialise");$.each(n,function(e,s){if(t=Backend.Menu.methods.findItemById(s,id))return!1}),t.children&&(s.children=t.children),Backend.Menu.selectors.menuItemContainer.nestable("replace",s),Backend.Menu.selectors.menuItemsData.val(JSON.stringify(Backend.Menu.selectors.menuItemContainer.nestable("serialise")))}},init:function(){this.addHandlers()},addHandlers:function(){var e=this;this.selectors.menuItemContainer.nestable({callback:function(t,s){e.selectors.menuItemsData.val(JSON.stringify($(t).nestable("serialise")))},json:this.selectors.menuItemsData.val(),includeContent:!0,scroll:!1,maxDepth:10}),this.selectors.addCustomUrlButton.click(function(){var t=e.selectors.addCustomUrlButton.attr("data-header");e.selectors.modal.find(".modal-title").html(t),e.selectors.modal.modal("show"),callback={success:function(t){t.status>=200&&t.status<400&&(e.selectors.modal.find(".modal-body").html(t.responseText),jQuery(document).find(e.selectors.addCustomUrlForm).removeClass("hidden"))},error:function(e){}},Backend.Utils.ajaxrequest(e.selectors.formUrl+"/_add_custom_url_form","get",{},Backend.Utils.csrf,callback)}),jQuery(document).on("submit",e.selectors.addCustomUrlForm,function(t){t.preventDefault();var s=jQuery(this).serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});s.name.length>0&&(s.id.length>0?e.methods.editMenuItem(s):e.methods.addMenuItem(s),e.selectors.modal.modal("hide"))}),jQuery(document).on("click",e.selectors.addModuleToMenuButton,function(){var t={id:$(this).attr("data-id"),name:$(this).attr("data-name"),url:$(this).attr("data-url"),url_type:$(this).attr("data-url_type"),open_in_new_tab:$(this).attr("data-open_in_new_tab"),view_permission_id:$(this).attr("data-view_permission_id")};e.methods.addMenuItem(t)}),jQuery(document).on("click",e.selectors.removeMenuItemButton,function(){e.selectors.menuItemContainer.nestable("remove",jQuery(this).parents(".dd-item").first().attr("data-id")),Backend.Menu.selectors.menuItemsData.val(JSON.stringify(Backend.Menu.selectors.menuItemContainer.nestable("serialise")))}),jQuery(document).on("click",e.selectors.editMenuItemButton,function(){id=jQuery(this).parents(".dd-item").first().attr("data-id");var t,s=e.selectors.menuItemContainer.nestable("serialise");$.each(s,function(s,n){if(t=e.methods.findItemById(n,id))return!1}),null!=t.id&&t.id==id&&(callback={success:function(s){s.status>=200&&s.status<400&&(e.selectors.modal.find(".modal-body").html(s.responseText),e.selectors.modal.find(".modal-dialog .modal-content .modal-header .modal-title").html("Edit: "+t.name),$(document).find(e.selectors.modal).find(".mi-id").val(t.id),$(document).find(e.selectors.modal).find(".mi-name").val(t.name),$(document).find(e.selectors.modal).find(".mi-url").val(t.url),$(document).find(e.selectors.modal).find(".mi-url_type_"+t.url_type).prop("checked",!0),1==t.open_in_new_tab&&$(document).find(e.selectors.modal).find(".mi-open_in_new_tab").prop("checked",!0),$(document).find(e.selectors.modal).find(".mi-icon").val(t.icon),$(document).find(e.selectors.modal).find(".mi-view_permission_id").val(t.view_permission_id),$(document).find("#menu-add-custom-url").removeClass("hidden"),e.selectors.modal.modal("show"))},error:function(e){}},Backend.Utils.ajaxrequest(e.selectors.formUrl+"/_add_custom_url_form","get",{},Backend.Utils.csrf,callback))})}},Faq:{selectors:{},init:function(e){},addHandlers:function(){}},Profile:{selectors:{},init:function(){this.setSelectors(),this.addHandlers()},setSelectors:function(){this.selectors.state=document.querySelector(".st"),this.selectors.cities=document.querySelector(".ct")},addHandlers:function(){null!=this.selectors.state&&this.selectors.state.select2(),null!=this.selectors.cities&&this.selectors.cities.select2()}},DataTableSearch:{selector:{},init:function(e){this.setSelectors(),this.setSelectors.divAlerts.delay(2e3).fadeOut(800),this.addHandlers(e)},setSelectors:function(){this.selector.searchInput=document.querySelector("div.dataTables_filter input"),this.selector.columnSearchInput=document.querySelectorAll(".search-input-text"),this.selector.columnSelectInput=document.querySelectorAll(".search-input-select"),this.selector.restButton=document.querySelectorAll(".reset-data"),this.setSelectors.copyButton=document.getElementById("copyButton"),this.setSelectors.csvButton=document.getElementById("csvButton"),this.setSelectors.excelButton=document.getElementById("excelButton"),this.setSelectors.pdfButton=document.getElementById("pdfButton"),this.setSelectors.printButton=document.getElementById("printButton"),this.setSelectors.divAlerts=jQuery("div.alert").not(".alert-important")},cloneElement:function(e,t){for(var s=e.cloneNode();e.firstChild;)s.appendChild(e.lastChild);e.parentNode.replaceChild(s,e),Backend.DataTableSearch.setSelectors(),t(this.selector.searchInput)},addHandlers:function(e){this.cloneElement(this.selector.searchInput,function(t){t.onkeypress=function(t){13==t.keyCode&&e.fnFilter(this.value)}}),this.selector.columnSearchInput.length>0&&this.selector.columnSearchInput.forEach(function(t){t.onkeypress=function(s){if(13==s.keyCode){var n=t.getAttribute("data-column"),o=t.value;e.api().columns(n).search(o).draw()}}}),this.selector.columnSelectInput.length>>0&&this.selector.columnSelectInput.forEach(function(t){t.onchange=function(s){var n=t.getAttribute("data-column"),o=t.value;e.api().columns(n).search(o).draw()}}),this.selector.restButton.length>>0&&this.selector.restButton.forEach(function(t){t.onclick=function(t){var s=this.previousElementSibling,n=s.getAttribute("data-column");s.value="",e.api().columns(n).search("").draw()}}),this.setSelectors.copyButton.onclick=function(e){document.querySelector(".copyButton").click()},this.setSelectors.csvButton.onclick=function(e){document.querySelector(".csvButton").click()},this.setSelectors.excelButton.onclick=function(e){document.querySelector(".excelButton").click()},this.setSelectors.pdfButton.onclick=function(e){document.querySelector(".pdfButton").click()},this.setSelectors.printButton.onclick=function(e){document.querySelector(".printButton").click()}}},Settings:{selectors:{RouteURL:"",setting:document.getElementById("setting")},init:function(){this.setSelectors(),this.addHandlers()},setSelectors:function(){this.selectors.setting=document.getElementById("setting"),this.selectors.removeLogo=document.querySelector(".remove-logo"),this.selectors.imageRemoveLogo=document.querySelector(".img-remove-logo"),this.selectors.imageRemoveFavicon=document.querySelector(".img-remove-favicon")},addHandlers:function(){var e=this.selectors.RouteURL,t=this.selectors.setting.getAttribute("data-id");e=e.replace("-1",t),this.selectors.removeLogo.onclick=function(t){var s=t.target.getAttribute("data-id");swal({title:"Warning",text:"Are you sure you want to remove?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",closeOnConfirm:!0},function(t){t&&("logo"==s?(value="logo",Backend.Utils.addClass(Backend.Settings.selectors.imageRemoveLogo,"hidden")):(value="favicon",Backend.Utils.addClass(Backend.Settings.selectors.imageRemoveFavicon,"hidden")),callback={success:function(e){e.status>=200&&e.status},error:function(e){}},Backend.Utils.ajaxrequest(e,"POST",{data:value,_token:Backend.Utils.csrf},Backend.Utils.csrf,callback))})}}}};
